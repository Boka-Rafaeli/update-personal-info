# План тестирования: Обновление персональной информации

## Обзор

Этот план тестирования покрывает функциональность обновления персональной информации пользователя в разделе "My Profile & Settings" торговой платформы.

**Начальное состояние**: Пользователь выполнил логин и открыл боковое меню (seed.spec.ts выполняет эти действия).

**Тестовое окружение**: prod (по умолчанию)

---

## Сценарий 1: Просмотр экрана "My Profile & Settings"

### Цель

Проверить корректное отображение экрана "My Profile & Settings" после навигации из бокового меню.

### Предусловия

- Пользователь авторизован в системе
- Боковое меню открыто (seed.spec.ts)

### Шаги выполнения

1. В боковом меню найти и кликнуть на опцию "My Profile & Settings" (иконка профиля)
2. Дождаться загрузки экрана "My Profile & Settings"
3. Проверить наличие заголовка "MY PROFILE & SETTINGS" в верхней части экрана
4. Проверить наличие кнопки закрытия (X) в правом верхнем углу
5. Проверить наличие секции "PERSONAL DETAILS"
6. Проверить наличие секции "PLATFORM SETTINGS"

### Ожидаемый результат

- Экран "My Profile & Settings" успешно открывается
- Все элементы интерфейса отображаются корректно
- Заголовок и кнопка закрытия видны и доступны

### Критерии успеха

- ✅ Экран открывается без ошибок
- ✅ Все секции отображаются
- ✅ Навигация работает корректно

---

## Сценарий 2: Просмотр персональных данных (PERSONAL DETAILS)

### Цель

Проверить корректное отображение всех полей персональной информации пользователя.

### Предусловия

- Экран "My Profile & Settings" открыт

### Шаги выполнения

1. Найти секцию "PERSONAL DETAILS"
2. Проверить наличие и отображение поля "T.P Number" со значением (например, "21923873")
3. Проверить, что поле "T.P Number" не имеет иконки редактирования (read-only)
4. Проверить наличие и отображение поля "Name" со значением (например, "vasily alibaba")
5. Проверить наличие иконки редактирования (карандаш) рядом с полем "Name"
6. Проверить наличие и отображение поля "Password" с маскированным значением ("**\*\*\*\***")
7. Проверить наличие иконки редактирования рядом с полем "Password"
8. Проверить наличие и отображение поля "Email Address" с частично замаскированным значением (например, "va\***\*\*\*\***@**\*\*\*\***")
9. Проверить наличие иконки редактирования рядом с полем "Email Address"
10. Проверить наличие и отображение поля "Phone" с частично замаскированным значением (например, "44-6**\*\***56")
11. Проверить наличие иконки редактирования рядом с полем "Phone"

### Ожидаемый результат

- Все поля персональной информации отображаются корректно
- Чувствительные данные (пароль, email, телефон) частично или полностью замаскированы
- Поля, доступные для редактирования, имеют иконку редактирования
- Поле "T.P Number" является read-only

### Критерии успеха

- ✅ Все поля отображаются
- ✅ Маскирование данных работает корректно
- ✅ Иконки редактирования присутствуют только у редактируемых полей

---

## Сценарий 3: Открытие модального окна редактирования имени

### Цель

Проверить открытие модального окна "UPDATE PERSONAL INFO" при клике на иконку редактирования поля "Name".

### Предусловия

- Экран "My Profile & Settings" открыт
- Секция "PERSONAL DETAILS" видна

### Шаги выполнения

1. Найти поле "Name" в секции "PERSONAL DETAILS"
2. Найти иконку редактирования (карандаш) рядом с полем "Name"
3. Кликнуть на иконку редактирования
4. Дождаться появления модального окна
5. Проверить наличие заголовка "UPDATE PERSONAL INFO" в модальном окне
6. Проверить наличие кнопки закрытия (X) в правом верхнем углу модального окна
7. Проверить наличие поля "First name" с текущим значением (например, "vasily")
8. Проверить наличие поля "Last name" с текущим значением (например, "alibaba")
9. Проверить наличие поля "Country Code" с текущим значением (например, "44")
10. Проверить наличие поля "Phone Number" с частично замаскированным значением (например, "6**\*\***56")
11. Проверить наличие кнопки "Save" в нижней части модального окна

### Ожидаемый результат

- Модальное окно "UPDATE PERSONAL INFO" успешно открывается
- Все поля формы предзаполнены текущими значениями пользователя
- Кнопка "Save" доступна для взаимодействия
- Кнопка закрытия (X) работает

### Критерии успеха

- ✅ Модальное окно открывается без ошибок
- ✅ Все поля предзаполнены корректными значениями
- ✅ Форма готова к редактированию

---

## Сценарий 4: Редактирование имени и фамилии (Happy Path)

### Цель

Проверить успешное обновление имени и фамилии пользователя.

### Предусловия

- Модальное окно "UPDATE PERSONAL INFO" открыто
- Все поля предзаполнены

### Шаги выполнения

1. Очистить поле "First name"
2. Ввести новое значение в поле "First name" (например, "Ivan")
3. Очистить поле "Last name"
4. Ввести новое значение в поле "Last name" (например, "Petrov")
5. Кликнуть на кнопку "Save"
6. Дождаться закрытия модального окна
7. Проверить обновление значения поля "Name" в секции "PERSONAL DETAILS" (должно отображаться "Ivan Petrov" или "ivan petrov" в зависимости от форматирования)

### Ожидаемый результат

- Данные успешно сохраняются
- Модальное окно закрывается
- Обновленное имя отображается в секции "PERSONAL DETAILS"
- Отображается уведомление об успешном сохранении (если предусмотрено)

### Критерии успеха

- ✅ Данные сохраняются без ошибок
- ✅ Обновленное имя отображается корректно
- ✅ Модальное окно закрывается после сохранения

---

## Сценарий 5: Редактирование номера телефона (Happy Path)

### Цель

Проверить успешное обновление номера телефона пользователя.

### Предусловия

- Модальное окно "UPDATE PERSONAL INFO" открыто

### Шаги выполнения

1. Очистить поле "Country Code"
2. Ввести новый код страны (например, "7")
3. Очистить поле "Phone Number"
4. Ввести новый номер телефона (например, "9123456789")
5. Кликнуть на кнопку "Save"
6. Дождаться закрытия модального окна
7. Проверить обновление значения поля "Phone" в секции "PERSONAL DETAILS" (должно отображаться с маскированием, например, "7-9**\*\***89")

### Ожидаемый результат

- Номер телефона успешно сохраняется
- Модальное окно закрывается
- Обновленный номер отображается в секции "PERSONAL DETAILS" с корректным маскированием
- Отображается уведомление об успешном сохранении (если предусмотрено)

### Критерии успеха

- ✅ Данные сохраняются без ошибок
- ✅ Обновленный номер отображается с маскированием
- ✅ Модальное окно закрывается после сохранения

---

## Сценарий 6: Валидация полей формы (Negative Testing)

### Цель

Проверить валидацию полей формы при вводе некорректных данных.

### Предусловия

- Модальное окно "UPDATE PERSONAL INFO" открыто

### Подсценарий 6.1: Пустые обязательные поля

#### Шаги выполнения

1. Очистить поле "First name"
2. Оставить поле "First name" пустым
3. Очистить поле "Last name"
4. Оставить поле "Last name" пустым
5. Попытаться кликнуть на кнопку "Save"

#### Ожидаемый результат

- Кнопка "Save" неактивна ИЛИ
- Отображается сообщение об ошибке валидации для обязательных полей
- Модальное окно не закрывается

### Подсценарий 6.2: Некорректный формат номера телефона

#### Шаги выполнения

1. Ввести в поле "Phone Number" некорректное значение (например, только буквы "abc")
2. Попытаться кликнуть на кнопку "Save"

#### Ожидаемый результат

- Отображается сообщение об ошибке валидации формата номера телефона
- Модальное окно не закрывается
- Данные не сохраняются

### Подсценарий 6.3: Некорректный код страны

#### Шаги выполнения

1. Ввести в поле "Country Code" некорректное значение (например, "999" или "abc")
2. Попытаться кликнуть на кнопку "Save"

#### Ожидаемый результат

- Отображается сообщение об ошибке валидации кода страны
- Модальное окно не закрывается
- Данные не сохраняются

### Критерии успеха

- ✅ Валидация работает для всех полей
- ✅ Сообщения об ошибках отображаются корректно
- ✅ Некорректные данные не сохраняются

---

## Сценарий 7: Отмена редактирования

### Цель

Проверить возможность отмены редактирования без сохранения изменений.

### Предусловия

- Модальное окно "UPDATE PERSONAL INFO" открыто
- Внесены изменения в поля формы

### Шаги выполнения

1. Внести изменения в поле "First name" (например, "TestName")
2. Внести изменения в поле "Last name" (например, "TestLastName")
3. Кликнуть на кнопку закрытия (X) в правом верхнем углу модального окна
4. Проверить закрытие модального окна
5. Проверить, что значения в секции "PERSONAL DETAILS" остались без изменений (не обновились)

### Ожидаемый результат

- Модальное окно закрывается
- Изменения не сохраняются
- Исходные данные остаются без изменений

### Критерии успеха

- ✅ Модальное окно закрывается
- ✅ Данные не сохраняются при отмене
- ✅ Исходные значения сохраняются

---

## Сценарий 8: Просмотр настроек платформы (PLATFORM SETTINGS)

### Цель

Проверить корректное отображение настроек платформы.

### Предусловия

- Экран "My Profile & Settings" открыт

### Шаги выполнения

1. Найти секцию "PLATFORM SETTINGS"
2. Проверить наличие настройки "Set volume in" с опциями:
   - "Amounts" (радио-кнопка)
   - "Lot" (радио-кнопка)
3. Проверить текущее выбранное значение (например, "Amounts")
4. Проверить наличие настройки "Round chart timeline" с опциями:
   - "OFF" (переключатель)
   - "ON" (переключатель)
5. Проверить текущее состояние переключателя (например, "ON")
6. Проверить наличие поля "Web Version" с версией (например, "2025.12.14.2")
7. Проверить, что поле "Web Version" является read-only (нет иконки редактирования)
8. Проверить наличие раздела "Account Closure" с текстом "Account Closure:" и ссылкой "Close My Account"

### Ожидаемый результат

- Все настройки платформы отображаются корректно
- Текущие значения настроек отображаются правильно
- Поле версии является read-only
- Ссылка "Close My Account" доступна

### Критерии успеха

- ✅ Все настройки отображаются
- ✅ Текущие значения корректны
- ✅ Элементы управления доступны

---

## Сценарий 9: Изменение настройки "Set volume in"

### Цель

Проверить изменение настройки объема торговли.

### Предусловия

- Экран "My Profile & Settings" открыт
- Секция "PLATFORM SETTINGS" видна

### Шаги выполнения

1. Найти настройку "Set volume in"
2. Определить текущее выбранное значение (например, "Amounts")
3. Кликнуть на альтернативную опцию (например, "Lot")
4. Проверить изменение выбранного значения
5. Обновить страницу (refresh)
6. Проверить, что выбранное значение сохранилось после обновления

### Ожидаемый результат

- Настройка успешно изменяется
- Выбранное значение сохраняется после обновления страницы
- Изменения применяются к торговой платформе

### Критерии успеха

- ✅ Настройка изменяется без ошибок
- ✅ Значение сохраняется после refresh
- ✅ Изменения применяются корректно

---

## Сценарий 10: Изменение настройки "Round chart timeline"

### Цель

Проверить переключение настройки округления временной шкалы графика.

### Предусловия

- Экран "My Profile & Settings" открыт
- Секция "PLATFORM SETTINGS" видна

### Шаги выполнения

1. Найти настройку "Round chart timeline"
2. Определить текущее состояние (например, "ON")
3. Кликнуть на альтернативную опцию (например, "OFF")
4. Проверить изменение состояния переключателя
5. Обновить страницу (refresh)
6. Проверить, что состояние сохранилось после обновления

### Ожидаемый результат

- Переключатель успешно изменяет состояние
- Состояние сохраняется после обновления страницы
- Изменения применяются к интерфейсу графиков

### Критерии успеха

- ✅ Переключатель работает корректно
- ✅ Состояние сохраняется после refresh
- ✅ Изменения применяются к графику

---

## Сценарий 11: Кнопка "Continue Registration"

### Цель

Проверить функциональность кнопки "Continue Registration".

### Предусловия

- Экран "My Profile & Settings" открыт
- Секция "PERSONAL DETAILS" видна

### Шаги выполнения

1. Найти кнопку "Continue Registration" между секциями "PERSONAL DETAILS" и "PLATFORM SETTINGS"
2. Проверить видимость и доступность кнопки
3. Кликнуть на кнопку "Continue Registration"
4. Проверить результат действия:
   - Переход на другой экран ИЛИ
   - Открытие модального окна ИЛИ
   - Выполнение другого действия

### Ожидаемый результат

- Кнопка доступна и кликабельна
- При клике выполняется ожидаемое действие (переход/модальное окно/другое)

### Критерии успеха

- ✅ Кнопка работает корректно
- ✅ Выполняется ожидаемое действие

---

## Сценарий 12: Закрытие экрана "My Profile & Settings"

### Цель

Проверить закрытие экрана через кнопку X.

### Предусловия

- Экран "My Profile & Settings" открыт

### Шаги выполнения

1. Найти кнопку закрытия (X) в правом верхнем углу экрана
2. Кликнуть на кнопку закрытия
3. Проверить закрытие экрана "My Profile & Settings"
4. Проверить возврат к предыдущему экрану (главный экран торговой платформы)

### Ожидаемый результат

- Экран "My Profile & Settings" закрывается
- Пользователь возвращается на предыдущий экран
- Боковое меню может оставаться открытым или закрываться (зависит от реализации)

### Критерии успеха

- ✅ Экран закрывается корректно
- ✅ Навигация работает правильно

---

## Сценарий 13: Редактирование пароля (через иконку редактирования)

### Цель

Проверить открытие формы редактирования пароля.

### Предусловия

- Экран "My Profile & Settings" открыт
- Секция "PERSONAL DETAILS" видна

### Шаги выполнения

1. Найти поле "Password" в секции "PERSONAL DETAILS"
2. Найти иконку редактирования (карандаш) рядом с полем "Password"
3. Кликнуть на иконку редактирования
4. Проверить результат:
   - Открытие модального окна для смены пароля ИЛИ
   - Переход на отдельную страницу смены пароля ИЛИ
   - Другое поведение

### Ожидаемый результат

- При клике на иконку редактирования пароля открывается форма/модальное окно для смены пароля
- Форма содержит необходимые поля (старый пароль, новый пароль, подтверждение)

### Критерии успеха

- ✅ Форма редактирования пароля открывается
- ✅ Все необходимые поля присутствуют

---

## Сценарий 14: Редактирование email (через иконку редактирования)

### Цель

Проверить открытие формы редактирования email.

### Предусловия

- Экран "My Profile & Settings" открыт
- Секция "PERSONAL DETAILS" видна

### Шаги выполнения

1. Найти поле "Email Address" в секции "PERSONAL DETAILS"
2. Найти иконку редактирования (карандаш) рядом с полем "Email Address"
3. Кликнуть на иконку редактирования
4. Проверить результат:
   - Открытие модального окна для смены email ИЛИ
   - Переход на отдельную страницу смены email ИЛИ
   - Другое поведение

### Ожидаемый результат

- При клике на иконку редактирования email открывается форма/модальное окно для смены email
- Форма содержит поле для ввода нового email и, возможно, подтверждение пароля

### Критерии успеха

- ✅ Форма редактирования email открывается
- ✅ Все необходимые поля присутствуют

---

## Сценарий 15: Редактирование телефона (через иконку редактирования)

### Цель

Проверить открытие формы редактирования телефона через иконку редактирования в секции PERSONAL DETAILS.

### Предусловия

- Экран "My Profile & Settings" открыт
- Секция "PERSONAL DETAILS" видна

### Шаги выполнения

1. Найти поле "Phone" в секции "PERSONAL DETAILS"
2. Найти иконку редактирования (карандаш) рядом с полем "Phone"
3. Кликнуть на иконку редактирования
4. Проверить открытие модального окна "UPDATE PERSONAL INFO" (то же самое, что при редактировании имени)
5. Проверить предзаполнение полей "Country Code" и "Phone Number" текущими значениями

### Ожидаемый результат

- Открывается то же модальное окно "UPDATE PERSONAL INFO"
- Поля "Country Code" и "Phone Number" предзаполнены текущими значениями
- Можно редактировать телефон без изменения имени

### Критерии успеха

- ✅ Модальное окно открывается корректно
- ✅ Поля телефона предзаполнены
- ✅ Можно редактировать только телефон

---

## Сценарий 16: Граничные значения для полей формы

### Цель

Проверить обработку граничных значений при редактировании персональной информации.

### Предусловия

- Модальное окно "UPDATE PERSONAL INFO" открыто

### Подсценарий 16.1: Максимальная длина имени

#### Шаги выполнения

1. Ввести в поле "First name" очень длинное значение (например, 100+ символов)
2. Попытаться сохранить

#### Ожидаемый результат

- Отображается сообщение об ошибке валидации максимальной длины ИЛИ
- Поле обрезается до максимальной длины ИЛИ
- Сохранение происходит с обрезанным значением

### Подсценарий 16.2: Минимальная длина имени

#### Шаги выполнения

1. Ввести в поле "First name" очень короткое значение (1 символ)
2. Попытаться сохранить

#### Ожидаемый результат

- Сохранение происходит успешно (если минимум 1 символ) ИЛИ
- Отображается сообщение об ошибке валидации минимальной длины

### Подсценарий 16.3: Специальные символы в имени

#### Шаги выполнения

1. Ввести в поле "First name" значение со специальными символами (например, "John-Doe", "O'Brien", "José")
2. Попытаться сохранить

#### Ожидаемый результат

- Сохранение происходит успешно (если специальные символы разрешены) ИЛИ
- Отображается сообщение об ошибке валидации

### Критерии успеха

- ✅ Граничные значения обрабатываются корректно
- ✅ Валидация работает для всех граничных случаев

---

## Сценарий 17: Проверка маскирования данных после обновления

### Цель

Проверить корректное маскирование обновленных данных в секции PERSONAL DETAILS.

### Предусловия

- Данные были успешно обновлены через модальное окно

### Шаги выполнения

1. Обновить email через форму редактирования email
2. Вернуться на экран "My Profile & Settings"
3. Проверить, что поле "Email Address" отображается с маскированием (например, "ne\***\*\*\*\***@**\*\*\*\***")
4. Обновить телефон через модальное окно "UPDATE PERSONAL INFO"
5. Вернуться на экран "My Profile & Settings"
6. Проверить, что поле "Phone" отображается с маскированием (например, "7-9**\*\***89")
7. Проверить, что поле "Password" всегда отображается полностью замаскированным ("**\*\*\*\***")

### Ожидаемый результат

- Все чувствительные данные корректно маскируются после обновления
- Маскирование применяется согласно правилам безопасности
- Пароль всегда полностью замаскирован

### Критерии успеха

- ✅ Маскирование работает корректно
- ✅ Безопасность данных обеспечена

---

## Сценарий 18: Параллельное редактирование (Edge Case)

### Цель

Проверить поведение при попытке открыть несколько форм редактирования одновременно.

### Предусловия

- Экран "My Profile & Settings" открыт

### Шаги выполнения

1. Кликнуть на иконку редактирования поля "Name"
2. Дождаться открытия модального окна "UPDATE PERSONAL INFO"
3. Не закрывая модальное окно, попытаться кликнуть на иконку редактирования поля "Email" (если возможно)
4. Проверить поведение:
   - Второе модальное окно не открывается ИЛИ
   - Первое модальное окно закрывается, открывается второе ИЛИ
   - Оба модальных окна открываются (если разрешено)

### Ожидаемый результат

- Система корректно обрабатывает попытку открыть несколько форм редактирования
- Не возникает конфликтов или ошибок

### Критерии успеха

- ✅ Поведение предсказуемо и корректно
- ✅ Нет ошибок или конфликтов

---

## Приоритизация тестов

### Критичные (P0)

- Сценарий 1: Просмотр экрана "My Profile & Settings"
- Сценарий 2: Просмотр персональных данных
- Сценарий 3: Открытие модального окна редактирования имени
- Сценарий 4: Редактирование имени и фамилии (Happy Path)
- Сценарий 5: Редактирование номера телефона (Happy Path)

### Высокий приоритет (P1)

- Сценарий 6: Валидация полей формы (Negative Testing)
- Сценарий 7: Отмена редактирования
- Сценарий 8: Просмотр настроек платформы
- Сценарий 9: Изменение настройки "Set volume in"
- Сценарий 10: Изменение настройки "Round chart timeline"

### Средний приоритет (P2)

- Сценарий 11: Кнопка "Continue Registration"
- Сценарий 12: Закрытие экрана "My Profile & Settings"
- Сценарий 13: Редактирование пароля
- Сценарий 14: Редактирование email
- Сценарий 15: Редактирование телефона через иконку

### Низкий приоритет (P3)

- Сценарий 16: Граничные значения для полей формы
- Сценарий 17: Проверка маскирования данных после обновления
- Сценарий 18: Параллельное редактирование (Edge Case)

---

## Заметки по реализации

1. **Seed тест**: Используется `seed.spec.ts` для логина и открытия меню. Все остальные действия выполняются в тестах.

2. **Архитектура**: Следуйте строгой архитектуре проекта:
   - Компоненты содержат locators
   - Screens композируют компоненты
   - Flows содержат бизнес-логику
   - App предоставляет навигацию

3. **Изоляция тестов**: Каждый тест должен быть независимым и запускаться параллельно.

4. **Allure отчетность**: Используйте декоратор `@step()` для всех действий.

5. **UI-only подход**: Не используйте API для настройки данных, только UI взаимодействия.

---

## Дополнительные проверки

- Проверка производительности: время загрузки экрана "My Profile & Settings"
- Проверка доступности: поддержка клавиатурной навигации, screen readers
- Проверка адаптивности: корректное отображение на разных размерах экрана
- Проверка безопасности: корректное маскирование чувствительных данных

---

**Дата создания**: 2025-01-27  
**Версия**: 1.0  
**Автор**: AI Test Planner
